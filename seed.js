// This file should contain all the record creation needed to seed the database with its default values.
// The data can then be loaded with the node seed.js

var Promise = require('bluebird');
var db = require('./models').db;
var Place = require('./models/place');
var Hotel = require('./models/hotel');
var Restaurant = require('./models/restaurant');
var Activity = require('./models/activity');

var data = {
    hotel: [{"id":4,"name":"Smyth TriBeCa","num_stars":3.5,"amenities":"24 hour Gym","image":"https://s3-media2.fl.yelpcdn.com/bphoto/6FJ6uV2vrieDS0Sy3ZCJvg/l.jpg","createdAt":"2016-11-21T21:29:48.077-05:00","updatedAt":"2016-11-21T21:31:14.804-05:00","placeId":5}, {"id":1,"name":"Hotel Mulberry","num_stars":4.5,"amenities":"Free Wi-Fi","image":"https://s3-media3.fl.yelpcdn.com/bphoto/-CcCE3zQgUnPvTlnDwTneA/l.jpg","createdAt":"2016-11-21T21:29:48.075-05:00","updatedAt":"2016-11-21T22:15:09.927-05:00","placeId":2}, {"id":2,"name":"Andaz Wall Street","num_stars":4,"amenities":"Pool, Free Wi-Fi","image":"https://s3-media4.fl.yelpcdn.com/bphoto/dvLUKBfczCG29_TtGHek2g/l.jpg","createdAt":"2016-11-21T21:29:48.074-05:00","updatedAt":"2016-11-21T22:15:09.961-05:00","placeId":1}, {"id":15,"name":"Club Quarters","num_stars":4,"amenities":"Free Wif-Fi","image":"https://s3-media2.fl.yelpcdn.com/bphoto/wjc3UIFzehSkT4S1iElUYQ/l.jpg","createdAt":"2016-11-21T21:29:48.084-05:00","updatedAt":"2016-11-21T22:15:09.962-05:00","placeId":14}, {"id":9,"name":"Millenium Hilton Hotel","num_stars":3.5,"amenities":"Paid Wi-Fi","image":"https://s3-media3.fl.yelpcdn.com/bphoto/opFpurIC4KTeLAkzMoH92A/l.jpg","createdAt":"2016-11-21T21:29:48.08-05:00","updatedAt":"2016-11-21T22:15:09.963-05:00","placeId":9}, {"id":10,"name":"US Pacific Hotel","num_stars":2,"amenities":"Accepts Credit Cards","image":"https://s3-media1.fl.yelpcdn.com/bphoto/RZyjWwOpIKaWwhayj_wRzg/l.jpg","createdAt":"2016-11-21T21:29:48.081-05:00","updatedAt":"2016-11-21T22:15:09.966-05:00","placeId":10}, {"id":14,"name":"Cosmopolitan Hotel","num_stars":3.5,"amenities":"Free Wif-Fi","image":"https://s3-media3.fl.yelpcdn.com/bphoto/hDdQFznRpkayxYOHG7Mnxg/l.jpg","createdAt":"2016-11-21T21:29:48.084-05:00","updatedAt":"2016-11-21T22:15:09.997-05:00","placeId":15}, {"id":3,"name":"Hotel 91","num_stars":3.5,"amenities":"Free Wi-Fi","image":"https://s3-media4.fl.yelpcdn.com/bphoto/XNJp96K6S4aOLB_Rak9MnA/l.jpg","createdAt":"2016-11-21T21:29:48.078-05:00","updatedAt":"2016-11-21T22:15:09.962-05:00","placeId":7}, {"id":6,"name":"The Ritz-Carlton New York, Battery Park","num_stars":4.5,"amenities":"24 hour Gym, Paid Wi-Fi","image":"https://s3-media3.fl.yelpcdn.com/bphoto/YU3lXIQxYy3UM6Hl2VUHXA/l.jpg","createdAt":"2016-11-21T21:29:48.075-05:00","updatedAt":"2016-11-21T22:15:09.997-05:00","placeId":3}, {"id":13,"name":"New York Marriott Downtown","num_stars":3.5,"amenities":"24 hour Gym, Paid Wi-Fi","image":"https://s3-media3.fl.yelpcdn.com/bphoto/gMy2udxTzx1CpP62M6Bd2Q/l.jpg","createdAt":"2016-11-21T21:29:48.083-05:00","updatedAt":"2016-11-21T22:15:10-05:00","placeId":13}, {"id":11,"name":"Gild Hall, a Thompson Hotel","num_stars":4,"amenities":"Paid Wi-Fi","image":"https://s3-media1.fl.yelpcdn.com/bphoto/cVdthjZkG95IPlchph7ziQ/l.jpg","createdAt":"2016-11-21T21:29:48.082-05:00","updatedAt":"2016-11-21T22:15:10.001-05:00","placeId":11}, {"id":8,"name":"Conrad New York Hotel","num_stars":3.5,"amenities":"Paid Wi-Fi, Dogs Allowed","image":"https://s3-media3.fl.yelpcdn.com/bphoto/YNZBf86mw7JPNFG1-uZ09A/l.jpg","createdAt":"2016-11-21T21:29:48.078-05:00","updatedAt":"2016-11-21T22:15:10.015-05:00","placeId":8}, {"id":5,"name":"Double Tree","num_stars":3.5,"amenities":"24 hour Gym","image":"https://s3-media1.fl.yelpcdn.com/bphoto/GH6CS6W2r4WFOZs1rpzujg/l.jpg","createdAt":"2016-11-21T21:29:48.077-05:00","updatedAt":"2016-11-21T22:15:10.016-05:00","placeId":6}, {"id":12,"name":"W New York","num_stars":3.5,"amenities":"Pool, 24 hour Gym, Paid Wi-Fi","image":"https://s3-media3.fl.yelpcdn.com/bphoto/8vqXNIgw_VocN7nGIKnftA/l.jpg","createdAt":"2016-11-21T21:29:48.083-05:00","updatedAt":"2016-11-21T22:15:10.016-05:00","placeId":12}, {"id":7,"name":"Wall Street Inn","num_stars":4,"amenities":"Free Wi-Fi","image":"https://s3-media3.fl.yelpcdn.com/bphoto/clHosfoENalDp4i6I-jpVw/l.jpg","createdAt":"2016-11-21T21:29:48.076-05:00","updatedAt":"2016-11-21T22:15:10.055-05:00","placeId":4}],

    restaurant: [{"id":1,"name":"Bouley","cuisine":"French","price":4,"image":"https://s3-media4.fl.yelpcdn.com/bphoto/hM08RKH7KrSv1Z-giu-z5w/l.jpg","createdAt":"2016-11-21T21:29:48.085-05:00","updatedAt":"2016-11-21T21:43:42.016-05:00","placeId":16}, {"id":11,"name":"Kittichai","cuisine":"Thai","price":4,"image":"https://s3-media3.fl.yelpcdn.com/bphoto/mjoCWX7xdIWWfYwspl9TuQ/l.jpg","createdAt":"2016-11-21T21:29:48.089-05:00","updatedAt":"2016-11-21T21:53:27.98-05:00","placeId":27}, {"id":6,"name":"The Capital Grille","cuisine":"Steakhouses, American","price":4,"image":"https://s3-media1.fl.yelpcdn.com/bphoto/WVNp-ApSvbIAvu7Iggbfrg/l.jpg","createdAt":"2016-11-21T21:29:48.087-05:00","updatedAt":"2016-11-21T22:17:03.969-05:00","placeId":21}, {"id":15,"name":"Xe Lua","cuisine":"Vietnamese","price":1,"image":"https://s3-media3.fl.yelpcdn.com/bphoto/uxsx0XTyZYT6EZ0b0QEyIg/l.jpg","createdAt":"2016-11-21T21:29:48.091-05:00","updatedAt":"2016-11-21T22:17:03.994-05:00","placeId":30}, {"id":8,"name":"Joe's Shanghai","cuisine":"Shanghainese, Dim Sum","price":2,"image":"https://s3-media1.fl.yelpcdn.com/bphoto/0VV8b_PdmKnXcJ-ryXlGBw/l.jpg","createdAt":"2016-11-21T21:29:48.089-05:00","updatedAt":"2016-11-21T22:17:03.994-05:00","placeId":23}, {"id":7,"name":"Pylos","cuisine":"Greek","price":3,"image":"https://s3-media3.fl.yelpcdn.com/bphoto/gQdXP4qPNl1IVCWRcH6M4Q/l.jpg","createdAt":"2016-11-21T21:29:48.088-05:00","updatedAt":"2016-11-21T22:17:03.995-05:00","placeId":22}, {"id":4,"name":"Hop Lee Restaurant","cuisine":"Chinese","price":2,"image":"https://s3-media3.fl.yelpcdn.com/bphoto/QaRnbGLFOlG35cuWBGz24w/l.jpg","createdAt":"2016-11-21T21:29:48.087-05:00","updatedAt":"2016-11-21T22:17:03.997-05:00","placeId":19}, {"id":2,"name":"Marc Forgione","cuisine":"Seafood","price":3,"image":"https://s3-media4.fl.yelpcdn.com/bphoto/yQox1b4kz8M4fK5chZmQKQ/l.jpg","createdAt":"2016-11-21T21:29:48.086-05:00","updatedAt":"2016-11-21T22:17:03.996-05:00","placeId":17}, {"id":12,"name":"Bianca Restaurant","cuisine":"Italian","price":2,"image":"https://s3-media4.fl.yelpcdn.com/bphoto/3glESJvos_cumJXOyTM2AQ/l.jpg","createdAt":"2016-11-21T21:29:48.09-05:00","updatedAt":"2016-11-21T22:17:04.036-05:00","placeId":26}, {"id":5,"name":"Jungsik","cuisine":"Korean","price":4,"image":"https://s3-media1.fl.yelpcdn.com/bphoto/AOCHXf_qNZLWtarkx2J0iA/l.jpg","createdAt":"2016-11-21T21:29:48.087-05:00","updatedAt":"2016-11-21T22:17:04.036-05:00","placeId":20}, {"id":9,"name":"Cafe Katja","cuisine":"German, Austrian","price":2,"image":"https://s3-media1.fl.yelpcdn.com/bphoto/RXLtt93EJlMEjVwv2Ueczw/l.jpg","createdAt":"2016-11-21T21:29:48.089-05:00","updatedAt":"2016-11-21T22:17:04.038-05:00","placeId":24}, {"id":13,"name":"Rayuela","cuisine":"Spanish, Latin American","price":3,"image":"https://s3-media2.fl.yelpcdn.com/bphoto/_x433GViFkBQUk7M2Q1BwQ/l.jpg","createdAt":"2016-11-21T21:29:48.09-05:00","updatedAt":"2016-11-21T22:17:04.039-05:00","placeId":28}, {"id":14,"name":"Mas Farmhouse","cuisine":"New American, French","price":4,"image":"https://s3-media2.fl.yelpcdn.com/bphoto/SpNb0ZXIxVnQkyowD-BtPA/l.jpg","createdAt":"2016-11-21T21:29:48.09-05:00","updatedAt":"2016-11-21T22:17:04.055-05:00","placeId":29}, {"id":10,"name":"Rosanjin","cuisine":"Japanese","price":3,"image":"https://s3-media3.fl.yelpcdn.com/bphoto/YkMJsSpVdfW0_EaNGburrA/l.jpg","createdAt":"2016-11-21T21:29:48.089-05:00","updatedAt":"2016-11-21T22:17:04.055-05:00","placeId":25}, {"id":3,"name":"Tamarind","cuisine":"Indian","price":3,"image":"http://tamarindrestaurantsnyc.com/photos/foodPicTamarind.gif","createdAt":"2016-11-21T21:29:48.086-05:00","updatedAt":"2016-11-21T23:18:45.611-05:00","placeId":18}],
    activity: [{"id":6,"name":"Staten Island Ferry Whitehall Terminal","age_range":"All","image":"https://s3-media2.fl.yelpcdn.com/bphoto/f_BnSBMcmhcf02S9h57i5Q/l.jpg","createdAt":"2016-11-21T21:29:48.094-05:00","updatedAt":"2016-11-21T21:48:26.044-05:00","placeId":36}, {"id":2,"name":"South Street Seaport","age_range":"All","image":"https://s3-media2.fl.yelpcdn.com/bphoto/_jg1ZwsXikMtfkC3yuiBJQ/l.jpg","createdAt":"2016-11-21T21:29:48.092-05:00","updatedAt":"2016-11-21T21:57:57.55-05:00","placeId":32}, {"id":3,"name":"Ground Zero","age_range":"All","image":"https://s3-media4.fl.yelpcdn.com/bphoto/5Kr-uhwE5k_Tt9CvGfSGpw/l.jpg","createdAt":"2016-11-21T21:29:48.092-05:00","updatedAt":"2016-11-21T21:58:53.59-05:00","placeId":33}, {"id":4,"name":"National September 11th Memorial & Museum","age_range":"All","image":"https://s3-media2.fl.yelpcdn.com/bphoto/gu_txBwP4MM0eU8DJb3l9A/l.jpg","createdAt":"2016-11-21T21:29:48.093-05:00","updatedAt":"2016-11-21T21:59:41.922-05:00","placeId":34}, {"id":11,"name":"Brooklyn Bridge Park","age_range":"All","image":"https://s3-media3.fl.yelpcdn.com/bphoto/MC9G6eP7YeWYH29XYlTNkA/l.jpg","createdAt":"2016-11-21T21:29:48.097-05:00","updatedAt":"2016-11-21T22:00:23.635-05:00","placeId":41}, {"id":15,"name":"Strand Bookstore","age_range":"All","image":"https://s3-media1.fl.yelpcdn.com/bphoto/fi-Iezn0TMnMWGQn61TXaA/l.jpg","createdAt":"2016-11-21T21:29:48.1-05:00","updatedAt":"2016-11-21T22:00:54.608-05:00","placeId":45}, {"id":14,"name":"Union Square Holiday Market","age_range":"All","image":"https://s3-media1.fl.yelpcdn.com/bphoto/FhM0MUfJEGWuPrmLZTY6Pg/l.jpg","createdAt":"2016-11-21T21:29:48.099-05:00","updatedAt":"2016-11-21T22:18:10.28-05:00","placeId":44}, {"id":8,"name":"Blue Man Group","age_range":"All","image":"https://s3-media3.fl.yelpcdn.com/bphoto/nce0KIqPs-ajm2Ge2Of1pA/l.jpg","createdAt":"2016-11-21T21:29:48.094-05:00","updatedAt":"2016-11-21T22:18:10.302-05:00","placeId":38}, {"id":9,"name":"Scott's Pizza Tours","age_range":"All","image":"https://s3-media3.fl.yelpcdn.com/bphoto/oWaAiYL93xlE1yhvy0ssIw/l.jpg","createdAt":"2016-11-21T21:29:48.094-05:00","updatedAt":"2016-11-21T22:18:10.303-05:00","placeId":39}, {"id":7,"name":"Chinatown Ice Cream Factory","age_range":"All","image":"https://s3-media2.fl.yelpcdn.com/bphoto/H-57bJWdkIAZPN1_crPFxA/l.jpg","createdAt":"2016-11-21T21:29:48.094-05:00","updatedAt":"2016-11-21T22:18:10.305-05:00","placeId":37}, {"id":5,"name":"Battery Park","age_range":"All","image":"https://s3-media4.fl.yelpcdn.com/bphoto/kEHzFgzZHPoO2Qztctn69Q/l.jpg","createdAt":"2016-11-21T21:29:48.093-05:00","updatedAt":"2016-11-21T22:18:10.305-05:00","placeId":35}, {"id":13,"name":"Washington Square Park","age_range":"All","image":"https://s3-media2.fl.yelpcdn.com/bphoto/7vKSqmapAZY8iGGo6YcHzA/l.jpg","createdAt":"2016-11-21T21:29:48.098-05:00","updatedAt":"2016-11-21T22:18:10.304-05:00","placeId":43}, {"id":1,"name":"Mahayana Temple Buddhist Association","age_range":"All","image":"https://s3-media1.fl.yelpcdn.com/bphoto/eDZsSguQzvkl0iJhfLR_PA/l.jpg","createdAt":"2016-11-21T21:29:48.092-05:00","updatedAt":"2016-11-21T22:18:10.341-05:00","placeId":31}, {"id":12,"name":"Ellis Island Immigration Museum","age_range":"All","image":"https://s3-media2.fl.yelpcdn.com/bphoto/ikUsgG4B75UdryrFn2HAiw/l.jpg","createdAt":"2016-11-21T21:29:48.098-05:00","updatedAt":"2016-11-21T22:18:10.341-05:00","placeId":42}, {"id":10,"name":"Apple Store","age_range":"All","image":"http://cbsnews1.cbsistatic.com/hub/i/2011/05/19/cf8d47be-a643-11e2-a3f0-029118418759/FifthAve-Apple.jpg","createdAt":"2016-11-21T21:29:48.097-05:00","updatedAt":"2016-11-22T00:00:52.791-05:00","placeId":40}
]
};

db.sync({force: true})
    .then(function () {
        console.log("Dropped old data, now inserting data");
        const creatingHotels = data.hotel.map(function (hotel) {
            return Hotel.create(hotel, { include: [Place] });
        });
        const creatingRestaurants = data.restaurant.map(function (restaurant) {
            return Restaurant.create(restaurant, { include: [Place] });
        });
        const creatingActivities = data.activity.map(function (activity) {
            return Activity.create(activity, { include: [Place] });
        });
        return Promise.all([creatingHotels, creatingRestaurants, creatingActivities]);
    })
    .then(function () {
        console.log("Finished inserting data (press ctrl-c to exit)");
    })
    .catch(function (err) {
        console.error('There was totally a problem', err, err.stack);
    })
    .finally(function () {
        db.close();
        // this is a bluebird thing! Pass a handler that will be called regardless of this promise's fate. Returns a new promise chained from this promise. There are special semantics for .finally in that the final value cannot be modified from the handler.
        return null;
    });
